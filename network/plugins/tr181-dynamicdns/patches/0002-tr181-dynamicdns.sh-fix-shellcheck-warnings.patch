From b19cc415d4833143ebfd7da9d2e29fe1c644a90d Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Petr=20=C5=A0tetiar?= <ynezz@true.cz>
Date: Wed, 25 Jan 2023 09:27:59 +0100
Subject: [PATCH 2/3] tr181-dynamicdns.sh: fix shellcheck warnings
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Fixes following shellcheck warnings:

 SC3046 (warning): In POSIX sh, 'source' in place of '.' is undefined.
 SC3045 (warning): In POSIX sh, ulimit -c is undefined.
 SC3057 (warning): In POSIX sh, string indexing is undefined.
 SC2046 (warning): Quote this to prevent word splitting.

Signed-off-by: Petr Å tetiar <ynezz@true.cz>
---
 scripts/tr181-dynamicdns.sh | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/scripts/tr181-dynamicdns.sh b/scripts/tr181-dynamicdns.sh
index 8e241981599c..4e7eb85bc2ab 100644
--- a/scripts/tr181-dynamicdns.sh
+++ b/scripts/tr181-dynamicdns.sh
@@ -1,6 +1,7 @@
 #!/bin/sh
-[ -f /etc/environment ] && source /etc/environment
-ulimit -c ${ULIMIT_CONFIGURATION:-0}
+[ -f /etc/environment ] && . /etc/environment
+# shellcheck disable=SC3045
+ulimit -c "${ULIMIT_CONFIGURATION:-0}"
 name="tr181-dynamicdns"
 
 case $1 in
@@ -9,7 +10,7 @@ case $1 in
         ;;
     stop|shutdown)
         if [ -f /var/run/${name}.pid ]; then
-            kill `cat /var/run/${name}.pid`
+            kill "$(cat /var/run/${name}.pid)"
         else
             killall ${name}
         fi
