From 97892307a3711131cc4b269fb30a7a1538069b62 Mon Sep 17 00:00:00 2001
From: sahbot <support.opensource@softathome.com>
Date: Fri, 21 Apr 2023 12:19:55 +0200
Subject: [PATCH] Issue: HOP-3347 Handle a dot in the NetDev name [fix]

GitOrigin-RevId: 002bebb318c2934a884b84df604a65fb0b5ff6bb
---
 src/ethernet_utils.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/ethernet_utils.c b/src/ethernet_utils.c
index 22c068a..0badefb 100644
--- a/src/ethernet_utils.c
+++ b/src/ethernet_utils.c
@@ -388,7 +388,7 @@ void netdev_link_state_subscription_new(ethernet_info_t* ethernet) {
     ctx = ethernet_get_netdev_ctx();
     when_null_trace(ctx, exit, WARNING, "ctx not known, no subscription created");
 
-    amxc_string_setf(&expr, "object == 'NetDev.Link.%s.' && "
+    amxc_string_setf(&expr, "eobject == 'NetDev.Link.[%s].' && "
                      "contains('parameters.State')", ethernet->netdev_intf);
     if(ethernet->netdev_status_subscription != NULL) {
         amxb_subscription_delete(&(ethernet->netdev_status_subscription));
@@ -420,7 +420,7 @@ void netdev_link_mac_address_subscription_new(ethernet_info_t* ethernet) {
     ctx = ethernet_get_netdev_ctx();
     when_null_trace(ctx, exit, WARNING, "ctx not known, no subscription created");
 
-    amxc_string_setf(&expr, "object == 'NetDev.Link.%s.' && "
+    amxc_string_setf(&expr, "eobject == 'NetDev.Link.[%s].' && "
                      "contains('parameters.LLAddress')", ethernet->netdev_intf);
     if(ethernet->netdev_mac_subscription != NULL) {
         amxb_subscription_delete(&(ethernet->netdev_mac_subscription));
-- 
GitLab

