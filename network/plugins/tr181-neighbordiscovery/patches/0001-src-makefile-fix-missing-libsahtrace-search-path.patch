From a0878f8af68d3277af36b63f854bc81babf58d67 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Petr=20=C5=A0tetiar?= <ynezz@true.cz>
Date: Sat, 5 Nov 2022 08:01:51 +0100
Subject: [PATCH] src: makefile: fix missing libsahtrace search path
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Currently build fails during linking step:

 cannot find -lsahtrace

That's happening due to the fact, that libsahtrace is being installed to
STAGINGDIR/lib, but that path is missing in the linker paths. So fix it
by adding STAGING_LIBDIR into the linker args.

Signed-off-by: Petr Å tetiar <ynezz@true.cz>
---
 src/makefile | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/makefile b/src/makefile
index 179a854cd548..c1e131c61c67 100644
--- a/src/makefile
+++ b/src/makefile
@@ -31,7 +31,7 @@ else
 	CFLAGS += -Wstrict-prototypes -Wold-style-definition -Wnested-externs -std=gnu11
 endif
 
-LDFLAGS += -shared -fPIC -lamxc -lamxp -lamxd -lamxo -lamxm -lsahtrace -lnetmodel
+LDFLAGS += $(STAGING_LIBDIR) -shared -fPIC -lamxc -lamxp -lamxd -lamxo -lamxm -lsahtrace -lnetmodel
 
 # targets
 all: $(TARGET_SO)
