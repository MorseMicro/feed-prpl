From dd1b272cd2fb30070e2735d4f97ca4555f86d5f9 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Petr=20=C5=A0tetiar?= <ynezz@true.cz>
Date: Fri, 5 Aug 2022 13:33:59 +0200
Subject: [PATCH] src: makefile: fix missing libsahtrace search path
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Currently build fails during linking step:

 cannot find -lsahtrace

That's happening due to the fact, that libsahtrace is being installed to
STAGINGDIR/lib, but that path is missing in the linker paths. So fix it
by adding STAGING_LIBDIR into the linker args.

Signed-off-by: Petr Å tetiar <ynezz@true.cz>
---
 src/makefile | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/makefile b/src/makefile
index 9b384c081e91..a0e16440a0b7 100644
--- a/src/makefile
+++ b/src/makefile
@@ -31,7 +31,7 @@ else
 	CFLAGS += -Wstrict-prototypes -Wold-style-definition -Wnested-externs -std=gnu11
 endif
 
-LDFLAGS += -shared -fPIC \
+LDFLAGS += $(STAGING_LIBDIR) -shared -fPIC \
            -lamxc -lamxp -lamxd -lamxo  -lamxp -lamxm -lsahtrace -lnetmodel
 
 # targets
